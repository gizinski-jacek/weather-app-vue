<script setup lang="ts">
import { ref, watch, onMounted, onUnmounted } from "vue";
import type { OneCallWeatherData } from "../types/types";
import { convertPrecipitationVolume, convertSpeed, convertTemp, convertToPercentage, splitIntoGroups } from "../utilities/converters";
import ScrollToTopBtn from "../components/ScrollToTopBtn.vue";
import Tooltip from "./Tooltip.vue";

const props = defineProps<{
	weather: OneCallWeatherData | null;
	unitsSystem: 'metric' | 'imperial';
	dateFormat: 'en-gb' | 'en-us',
}>();

const displayedForecast = ref<"daily" | "hourly">("daily");
const pageView = ref<boolean>(true);
const currentPage = ref<number>(1);
const groupSize = ref<number>(8);
const smallScreen = ref<boolean>(false);

onMounted(() => {
	if (typeof window === 'undefined') return;
	if (window.innerWidth < 540) smallScreen.value = true;
	window.addEventListener("resize", watchResize);
});

onUnmounted(() => {
	window.removeEventListener("resize", watchResize);
	document.getElementById("forecast-display")?.removeEventListener("wheel", scrollHorizontally)
});

function watchResize() {
	if (window.innerWidth < 540) {
		smallScreen.value = true;
	} else {
		smallScreen.value = false;
	}
}

function changeForecast(value: "daily" | "hourly") {
	displayedForecast.value = value;
}

function changeDisplay() {
	pageView.value = !pageView.value;
}

function changePage(number: number) {
	if (!props.weather) return;
	if (
		number >
		Math.ceil(props.weather[displayedForecast.value].length / groupSize.value)
	) {
		currentPage.value = 1;
	} else if (number < 1) {
		currentPage.value = Math.ceil(
			props.weather[displayedForecast.value].length / groupSize.value
		);
	} else {
		currentPage.value = number;
	}
}

function scrollHorizontally(e: WheelEvent) {
	const element = document.getElementById("forecast-display");
	if (!element) return;
	if (window.innerWidth >= 940) e.preventDefault()
	element.scrollLeft += e.deltaY;
}

function scrollToEnd() {
	const element = document.getElementById("forecast-display");
	if (!element) return;
	element.scrollTo({
		left: element.scrollWidth,
		behavior: 'smooth',
	});
}

function scrollToStart() {
	const element = document.getElementById("forecast-display");
	if (!element) return;
	element.scrollTo({
		left: 0,
		behavior: 'smooth',
	});
}

watch(pageView, () => {
	const element = document.getElementById("forecast-display");
	if (!element) return;
	if (pageView.value) {
		element.removeEventListener("wheel", scrollHorizontally);
	} else {
		element.addEventListener("wheel", scrollHorizontally)
	}
});
</script>

<template>
	<section v-if="weather" class="weather-forecast">
		<div class="forecast-controls">
			<div class="time-controls">
				<button type="button" @click="changeForecast('daily')" :class="{ active: displayedForecast === 'daily' }">
					Daily
				</button>
				<button type="button" @click="changeForecast('hourly')" :class="{ active: displayedForecast === 'hourly' }">
					Hourly
				</button>
			</div>
			<div class="display-controls" v-if="splitIntoGroups(weather[displayedForecast], groupSize).length > 1">
				<div v-if="pageView" class="page-controls">
					<div class="arrow-prev" @click="changePage(currentPage - 1)"></div>
					<div v-for="num in Math.ceil(weather[displayedForecast].length / groupSize)" :key="num">
						<span class="dot" :class="{ active: currentPage === num }" @click="currentPage = num"></span>
					</div>
					<div class="arrow-next" @click="changePage(currentPage + 1)"></div>
				</div>
				<div v-else="pageView" class="scroll-controls">
					<button type="button" @click="scrollToStart">Start</button>
					<button type="button" @click="scrollToEnd">End</button>
				</div>
				<button type="button" @click="changeDisplay">
					{{ pageView ? "Pages" : "Scroll" }}
				</button>
			</div>
		</div>
		<div id="forecast-display" :class="{ scroll: !pageView && displayedForecast === 'hourly' }">
			<div v-if="displayedForecast === 'daily'" v-for="(chunk, indexH) in splitIntoGroups(
				weather[displayedForecast],
				groupSize
			)" :key="indexH" class="forecast-daily" :class="{
				active:
					weather[displayedForecast].length > groupSize
						? currentPage - 1 === indexH
						: 'active',
			}">
				<div v-for="(day, i) in chunk" :key="i" class="day">
					<div>
						{{
							new Date(day.dt * 1000).toLocaleDateString(dateFormat, {
								weekday: smallScreen ? "short" : "long",
								month: "numeric",
								day: "numeric",
							})
						}}
					</div>
					<div>
						<img :src="`https://openweathermap.org/img/wn/${day.weather[0].icon}.png`" :alt="day.weather[0].main" />
					</div>
					<div class="temperature">
						<div>
							<svg class="sun" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
								<rect width="24" height="24" />
								<path fill-rule="evenodd" clip-rule="evenodd"
									d="M8 12C8 9.79086 9.79086 8 12 8C14.2091 8 16 9.79086 16 12C16 14.2091 14.2091 16 12 16C9.79086 16 8 14.2091 8 12Z"
									fill="#323232" />
								<path fill-rule="evenodd" clip-rule="evenodd"
									d="M12 2C12.5523 2 13 2.44772 13 3V5C13 5.55228 12.5523 6 12 6C11.4477 6 11 5.55228 11 5V3C11 2.44772 11.4477 2 12 2Z"
									fill="#323232" />
								<path fill-rule="evenodd" clip-rule="evenodd"
									d="M19.7071 4.29289C20.0976 4.68342 20.0976 5.31658 19.7071 5.70711L17.7071 7.70711C17.3166 8.09763 16.6834 8.09763 16.2929 7.70711C15.9024 7.31658 15.9024 6.68342 16.2929 6.29289L18.2929 4.29289C18.6834 3.90237 19.3166 3.90237 19.7071 4.29289Z"
									fill="#323232" />
								<path fill-rule="evenodd" clip-rule="evenodd"
									d="M18 12C18 11.4477 18.4477 11 19 11H21C21.5523 11 22 11.4477 22 12C22 12.5523 21.5523 13 21 13H19C18.4477 13 18 12.5523 18 12Z"
									fill="#323232" />
								<path fill-rule="evenodd" clip-rule="evenodd"
									d="M16.2929 16.2929C16.6834 15.9024 17.3166 15.9024 17.7071 16.2929L19.7071 18.2929C20.0976 18.6834 20.0976 19.3166 19.7071 19.7071C19.3166 20.0976 18.6834 20.0976 18.2929 19.7071L16.2929 17.7071C15.9024 17.3166 15.9024 16.6834 16.2929 16.2929Z"
									fill="#323232" />
								<path fill-rule="evenodd" clip-rule="evenodd"
									d="M12 18C12.5523 18 13 18.4477 13 19V21C13 21.5523 12.5523 22 12 22C11.4477 22 11 21.5523 11 21V19C11 18.4477 11.4477 18 12 18Z"
									fill="#323232" />
								<path fill-rule="evenodd" clip-rule="evenodd"
									d="M7.70711 16.2929C8.09763 16.6834 8.09763 17.3166 7.70711 17.7071L5.70711 19.7071C5.31658 20.0976 4.68342 20.0976 4.29289 19.7071C3.90237 19.3166 3.90237 18.6834 4.29289 18.2929L6.29289 16.2929C6.68342 15.9024 7.31658 15.9024 7.70711 16.2929Z"
									fill="#323232" />
								<path fill-rule="evenodd" clip-rule="evenodd"
									d="M2 12C2 11.4477 2.44772 11 3 11H5C5.55228 11 6 11.4477 6 12C6 12.5523 5.55228 13 5 13H3C2.44772 13 2 12.5523 2 12Z"
									fill="#323232" />
								<path fill-rule="evenodd" clip-rule="evenodd"
									d="M4.29289 4.29289C4.68342 3.90237 5.31658 3.90237 5.70711 4.29289L7.70711 6.29289C8.09763 6.68342 8.09763 7.31658 7.70711 7.70711C7.31658 8.09763 6.68342 8.09763 6.29289 7.70711L4.29289 5.70711C3.90237 5.31658 3.90237 4.68342 4.29289 4.29289Z"
									fill="#323232" />
							</svg>
							<span>
								{{ convertTemp(unitsSystem, day.temp.day) }}
							</span>
						</div>
						<div>
							<svg class="moon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
								<rect width="24" height="24" />
								<path fill-rule="evenodd" clip-rule="evenodd"
									d="M8.23129 2.24048C9.24338 1.78695 10.1202 2.81145 9.80357 3.70098C8.72924 6.71928 9.38932 10.1474 11.6193 12.3765C13.8606 14.617 17.3114 15.2755 20.3395 14.1819C21.2206 13.8637 22.2173 14.7319 21.7817 15.7199C21.7688 15.7491 21.7558 15.7782 21.7427 15.8074C20.9674 17.5266 19.7272 19.1434 18.1227 20.2274C16.4125 21.3828 14.3957 22.0001 12.3316 22.0001H12.3306C9.93035 21.9975 7.6057 21.1603 5.75517 19.6321C3.90463 18.1039 2.64345 15.9797 2.18793 13.6237C1.73241 11.2677 2.11094 8.82672 3.2586 6.71917C4.34658 4.72121 6.17608 3.16858 8.20153 2.25386L8.23129 2.24048Z" />
							</svg>
							<span>
								{{ convertTemp(unitsSystem, day.temp.night) }}
							</span>
						</div>
					</div>
					<div>{{ day.weather[0].description }}</div>
					<div class="tooltip-icon">
						<Tooltip>
							<div class="tooltip">
								<div v-if="day.rain" class="precipitation">
									<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
										<path
											d="M6.316 21H5.212l.935-2h1.105zm2.065 2l1.871-4H9.147l-1.87 4zm3.468-1l1.403-3h-1.105l-1.403 3zm3.298-3l-2.338 5h1.104l2.339-5zm3 0l-.935 2h1.104l.936-2zM23 13.187a4.805 4.805 0 0 0-3.05-4.468 5.409 5.409 0 0 0-6.454-3.557 1.485 1.485 0 0 1-.493.47l-.247.142a1.503 1.503 0 0 1-.043.721 4.48 4.48 0 0 1 6.29 2.548l.15.436.43.17A3.807 3.807 0 0 1 18.187 17H5.438a2.432 2.432 0 0 1-.373-4.835 1.488 1.488 0 0 1-.45-.59 1.505 1.505 0 0 1-.088-.313A3.43 3.43 0 0 0 5.437 18h12.75A4.813 4.813 0 0 0 23 13.187zM5.219 9.55l.366-1.366L7 7.366V10l-1 1h1v1h1v-1h1l-1-1V7.366l1.415.817.366 1.366.5-.866 1.472.85.5-.866-1.472-.85.5-.866-1.366.366L8.5 6.5l1.415-.817 1.366.366-.5-.866 1.472-.85-.5-.866-1.472.85-.5-.866-.366 1.366L8 5.634V3l1-1H8V1H7v1H6l1 1v2.634l-1.415-.817-.366-1.366-.5.866-1.472-.85-.5.866 1.472.85-.5.866 1.366-.366L6.5 6.5l-1.415.817-1.366-.366.5.866-1.472.85.5.866 1.472-.85z" />
										<path fill="none" stroke-width="0" d="M0 0h24v24H0z" />
									</svg>
									<span>{{ convertPrecipitationVolume(unitsSystem, day.rain) }} ({{ convertToPercentage(day.pop)
									}})</span>
								</div>
								<div v-else-if="day.snow" class="precipitation">
									<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
										<path
											d="M6.316 21H5.212l.935-2h1.105zm2.065 2l1.871-4H9.147l-1.87 4zm3.468-1l1.403-3h-1.105l-1.403 3zm3.298-3l-2.338 5h1.104l2.339-5zm3 0l-.935 2h1.104l.936-2zM23 13.187a4.805 4.805 0 0 0-3.05-4.468 5.409 5.409 0 0 0-6.454-3.557 1.485 1.485 0 0 1-.493.47l-.247.142a1.503 1.503 0 0 1-.043.721 4.48 4.48 0 0 1 6.29 2.548l.15.436.43.17A3.807 3.807 0 0 1 18.187 17H5.438a2.432 2.432 0 0 1-.373-4.835 1.488 1.488 0 0 1-.45-.59 1.505 1.505 0 0 1-.088-.313A3.43 3.43 0 0 0 5.437 18h12.75A4.813 4.813 0 0 0 23 13.187zM5.219 9.55l.366-1.366L7 7.366V10l-1 1h1v1h1v-1h1l-1-1V7.366l1.415.817.366 1.366.5-.866 1.472.85.5-.866-1.472-.85.5-.866-1.366.366L8.5 6.5l1.415-.817 1.366.366-.5-.866 1.472-.85-.5-.866-1.472.85-.5-.866-.366 1.366L8 5.634V3l1-1H8V1H7v1H6l1 1v2.634l-1.415-.817-.366-1.366-.5.866-1.472-.85-.5.866 1.472.85-.5.866 1.366-.366L6.5 6.5l-1.415.817-1.366-.366.5.866-1.472.85.5.866 1.472-.85z" />
										<path fill="none" stroke-width="0" d="M0 0h24v24H0z" />
									</svg>
									<span>{{ convertPrecipitationVolume(unitsSystem, day.snow) }} ({{ convertToPercentage(day.pop)
									}})</span>
								</div>
								<div>
									<svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">
										<path
											d="M13 11.261c0.038 0 0.070-0.018 0.107-0.021 2.849-0.061 5.136-2.386 5.136-5.244 0-2.897-2.348-5.245-5.245-5.245-2.404 0-4.43 1.617-5.050 3.823l-0.009 0.037-0.012 0.025c-0.115 0.411-0.181 0.883-0.182 1.371v0c0 0.69 0.56 1.25 1.25 1.25s1.25-0.56 1.25-1.25v0c0-0.254 0.035-0.499 0.099-0.732l-0.005 0.019 0.006-0.012c0.327-1.18 1.391-2.032 2.655-2.032 1.519 0 2.75 1.231 2.75 2.75s-1.231 2.75-2.75 2.75h-0c-0.019 0-0.034 0.010-0.053 0.011l-10.932-0.011c-0 0-0 0-0 0-0.69 0-1.25 0.56-1.25 1.25s0.559 1.25 1.249 1.25l10.985 0.011zM24.469 4.869c-3.106 0.004-5.723 2.093-6.527 4.942l-0.012 0.048-0.013 0.026c-0.149 0.53-0.235 1.139-0.235 1.768 0 0.002 0 0.003 0 0.005v-0c0 0.69 0.56 1.25 1.25 1.25s1.25-0.56 1.25-1.25v0c0-0.002 0-0.005 0-0.007 0-0.393 0.054-0.774 0.155-1.135l-0.007 0.030 0.007-0.013c0.509-1.837 2.166-3.163 4.133-3.163 2.364 0 4.281 1.917 4.281 4.281s-1.917 4.281-4.281 4.281v0c-0.026 0-0.047 0.013-0.072 0.015l-20.34-0.020c-0.689 0.003-1.246 0.561-1.246 1.25s0.557 1.247 1.245 1.25l20.413 0.020c0.053-0.008 0.099-0.017 0.144-0.029l-0.008 0.002c3.685-0.073 6.644-3.078 6.644-6.774 0-3.742-3.033-6.775-6.775-6.775-0.002 0-0.004 0-0.006 0h0zM22.718 19.309c-0.031-0.008-0.070-0.017-0.11-0.023l-0.006-0.001-18.546 0.018c-0.69 0-1.25 0.56-1.25 1.25s0.56 1.25 1.25 1.25c0 0 0 0 0.001 0l18.487-0.018c0.020 0.001 0.037 0.012 0.058 0.012 1.902 0 3.443 1.542 3.443 3.443s-1.542 3.443-3.443 3.443c-1.582 0-2.915-1.067-3.318-2.521l-0.006-0.024-0.007-0.015c-0.074-0.267-0.117-0.573-0.118-0.89v-0c0-0.002 0-0.003 0-0.005 0-0.69-0.559-1.25-1.25-1.25s-1.25 0.559-1.25 1.25c0 0.002 0 0.003 0 0.005v-0c0 0.002 0 0.005 0 0.007 0 0.55 0.075 1.082 0.214 1.587l-0.010-0.042c0.005 0.017 0.016 0.029 0.021 0.045 0.717 2.533 3.009 4.357 5.726 4.357 3.281 0 5.941-2.66 5.941-5.941 0-3.241-2.595-5.876-5.821-5.94l-0.006-0z" />
									</svg>
									<span>{{ convertSpeed(unitsSystem, day.wind_speed) }}</span>
								</div>
								<div>
									<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
										<g>
											<path
												d="M255.996,74.939C114.838,74.939,0,189.784,0,330.942c0,19.646,2.24,39.233,6.667,58.228   c0.509,2.18,1.093,4.202,1.745,6.074c7.714,24.672,30.948,41.817,56.865,41.817h381.364c24.104,0,45.847-14.785,55-36.679   c1.108-2.18,2.03-4.599,2.734-7.296c0.27-1.026,0.689-2.741,1.318-5.528c4.179-18.478,6.307-37.54,6.307-56.617   C512,189.784,397.155,74.939,255.996,74.939z M475.763,380.811c-1.026,4.547-1.356,5.64-1.431,5.64l0.067-0.921   c-3.579,12.35-14.897,20.852-27.758,20.852H65.277c-12.831,0-24.119-8.456-27.729-20.77l0.21,1.416   c-0.045,0-0.33-1.026-1.214-4.816c-3.835-16.471-5.865-33.631-5.865-51.27c0-124.448,100.877-225.324,225.317-225.324   c124.44,0,225.324,100.876,225.324,225.324C481.321,348.08,479.396,364.767,475.763,380.811z" />
											<path
												d="M267.569,297.207c-3.633-1.244-7.52-1.955-11.572-1.955c-19.707,0-35.683,15.976-35.683,35.69   c0,19.706,15.976,35.682,35.683,35.682c18.036,0,32.912-13.392,35.308-30.769c0.225-1.618,0.374-3.243,0.374-4.913   C291.679,315.288,281.59,302.015,267.569,297.207z" />
											<path
												d="M399.716,194.787c-3.138-3.392-8.808-3.468-13.257-0.18l-123.594,91.004c2.696,0.412,5.378,1.049,8.014,1.955   c15.968,5.483,27.406,19.182,30.275,35.383l97.79-114.913C402.548,203.813,402.877,198.143,399.716,194.787z" />
											<path
												d="M340.402,182.908c5.543,3.214,12.628,1.303,15.834-4.239c3.206-5.551,1.303-12.636-4.239-15.849   c-5.543-3.19-12.644-1.288-15.849,4.247C332.956,172.624,334.844,179.717,340.402,182.908z" />
											<path
												d="M259.239,161.172c6.412,0,11.595-5.206,11.595-11.595c0-6.411-5.183-11.602-11.595-11.602   c-6.396,0-11.594,5.191-11.594,11.602C247.645,155.966,252.843,161.172,259.239,161.172z" />
											<path
												d="M76.175,320.898c-6.726,0-12.209,5.468-12.209,12.209s5.482,12.194,12.209,12.194   c6.741,0,12.194-5.453,12.194-12.194S82.916,320.898,76.175,320.898z" />
											<path
												d="M114.441,226.471c-5.542-3.206-12.643-1.289-15.849,4.254c-3.19,5.542-1.288,12.628,4.239,15.841   c5.558,3.206,12.658,1.296,15.864-4.247C121.886,236.776,119.984,229.677,114.441,226.471z" />
											<path
												d="M166.497,162.82c-5.558,3.213-7.445,10.298-4.239,15.849c3.191,5.542,10.291,7.453,15.834,4.239   c5.543-3.19,7.445-10.299,4.254-15.841C179.141,161.531,172.04,159.629,166.497,162.82z" />
											<path
												d="M404.038,226.471c-5.542,3.206-7.445,10.306-4.239,15.849c3.206,5.558,10.292,7.453,15.849,4.247   c5.542-3.213,7.445-10.299,4.239-15.841C416.696,225.182,409.595,223.265,404.038,226.471z" />
											<path
												d="M433.144,335.062c6.412,0,11.595-5.184,11.595-11.587c0-6.412-5.183-11.61-11.595-11.61   c-6.411,0-11.594,5.198-11.594,11.61C421.55,329.878,426.733,335.062,433.144,335.062z" />
										</g>
									</svg>
									<span>{{ day.pressure }}</span>
								</div>
								<div>
									<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 328.611 328.611">
										<g>
											<path
												d="M209.306,50.798c-2.452-3.337-7.147-4.055-10.485-1.602c-3.338,2.453-4.055,7.147-1.603,10.485   c54.576,74.266,66.032,123.541,66.032,151.8c0,27.691-8.272,52.794-23.293,70.685c-17.519,20.866-42.972,31.446-75.651,31.446   c-73.031,0-98.944-55.018-98.944-102.131c0-52.227,28.103-103.234,51.679-136.829c25.858-36.847,52.11-61.415,52.37-61.657   c3.035-2.819,3.209-7.565,0.39-10.6c-2.819-3.034-7.565-3.209-10.599-0.39c-1.11,1.031-27.497,25.698-54.254,63.765   c-24.901,35.428-54.586,89.465-54.586,145.71c0,31.062,9.673,59.599,27.236,80.353c20.361,24.061,50.345,36.779,86.708,36.779   c36.794,0,66.926-12.726,87.139-36.801c17.286-20.588,26.806-49.117,26.806-80.33C278.25,156.216,240.758,93.597,209.306,50.798z" />
											<path
												d="M198.43,148.146l-95.162,95.162c-2.929,2.929-2.929,7.678,0,10.606c1.465,1.464,3.385,2.197,5.304,2.197   s3.839-0.732,5.304-2.197l95.162-95.162c2.929-2.929,2.929-7.678,0-10.606C206.107,145.217,201.359,145.217,198.43,148.146z" />
											<path
												d="M191.965,207.899c-13.292,0-24.106,10.814-24.106,24.106s10.814,24.106,24.106,24.106s24.106-10.814,24.106-24.106   S205.257,207.899,191.965,207.899z M191.965,241.111c-5.021,0-9.106-4.085-9.106-9.106s4.085-9.106,9.106-9.106   s9.106,4.085,9.106,9.106S196.986,241.111,191.965,241.111z" />
											<path
												d="M125.178,194.162c13.292,0,24.106-10.814,24.106-24.106s-10.814-24.106-24.106-24.106s-24.106,10.814-24.106,24.106   S111.886,194.162,125.178,194.162z M125.178,160.949c5.021,0,9.106,4.085,9.106,9.106s-4.085,9.106-9.106,9.106   c-5.021,0-9.106-4.085-9.106-9.106S120.156,160.949,125.178,160.949z" />
										</g>
									</svg>
									<span>{{ day.humidity }}%</span>
								</div>
								<div>
									<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
										<path
											d="M13.5 0a.5.5 0 0 0 0 1H15v2.75h-.5a.5.5 0 0 0 0 1h.5V7.5h-1.5a.5.5 0 0 0 0 1H15v2.75h-.5a.5.5 0 0 0 0 1h.5V15h-1.5a.5.5 0 0 0 0 1h2a.5.5 0 0 0 .5-.5V.5a.5.5 0 0 0-.5-.5h-2zM7 1.5l.364-.343a.5.5 0 0 0-.728 0l-.002.002-.006.007-.022.023-.08.088a28.458 28.458 0 0 0-1.274 1.517c-.769.983-1.714 2.325-2.385 3.727C2.368 7.564 2 8.682 2 9.733 2 12.614 4.212 15 7 15s5-2.386 5-5.267c0-1.05-.368-2.169-.867-3.212-.671-1.402-1.616-2.744-2.385-3.727a28.458 28.458 0 0 0-1.354-1.605l-.022-.023-.006-.007-.002-.001L7 1.5zm0 0-.364-.343L7 1.5zm-.016.766L7 2.247l.016.019c.24.274.572.667.944 1.144.611.781 1.32 1.776 1.901 2.827H4.14c.58-1.051 1.29-2.046 1.9-2.827.373-.477.706-.87.945-1.144zM3 9.733c0-.755.244-1.612.638-2.496h6.724c.395.884.638 1.741.638 2.496C11 12.117 9.182 14 7 14s-4-1.883-4-4.267z" />
									</svg>
									<span>{{ convertTemp(unitsSystem, day.dew_point) }}</span>
								</div>
								<div>
									<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512.013 512.013">
										<g>
											<g>
												<g>
													<path
														d="M333.351,207.684c-5.938-27.443-24.149-48.717-47.198-58.489C291.262,115.343,317.755,90,348.95,90 c30.726,0,56.89,24.588,62.552,57.676c-32.331,10.293-55.542,42.204-55.542,79.448c0,11.782,9.551,21.333,21.333,21.333     c11.782,0,21.333-9.551,21.333-21.333c0-22.62,16.247-40.277,35.349-40.277c19.121,0,35.371,17.655,35.371,40.277     c0,11.782,9.551,21.333,21.333,21.333c11.782,0,21.333-9.551,21.333-21.333c0-37.991-24.149-70.427-57.501-80.038     c-6.439-55.931-50.9-99.753-105.563-99.753c-53.86,0-97.813,42.545-105.252,97.298c-1.549,0.294-3.1,0.633-4.651,1.031     c-19.695,5.031-35.731,17.525-46.215,33.923c-24.998-1.854-49.892,9.171-66.204,30.691c-9.133,12.059-14.586,26.04-16.492,40.377     c-37.91-1.421-74.757,18.985-95.04,55.29c-29.771,53.217-14.231,122.427,35.364,155.2c9.83,6.496,23.064,3.793,29.56-6.037     s3.793-23.064-6.037-29.56c-30.677-20.272-40.669-64.775-21.645-98.784c13.644-24.423,38.583-36.649,62.899-32.832     c4.622,11.971,11.94,22.967,21.888,31.87c8.779,7.857,22.266,7.11,30.124-1.67s7.11-22.266-1.67-30.124     c-5.918-5.297-9.95-12.286-11.992-19.874c-0.158-1.52-0.479-3.01-0.951-4.447c-1.884-11.546,0.659-23.95,8-33.644     c5.06-6.675,11.66-11.036,18.731-12.922c-0.257,7.18,0.343,14.5,1.924,21.811c2.491,11.516,13.846,18.831,25.362,16.34     s18.831-13.846,16.34-25.362c-4.812-22.24,7.608-44.052,26.626-48.91c18.394-4.711,37.342,8.042,42.03,29.708     c2.491,11.516,13.846,18.831,25.362,16.34C328.527,230.555,335.842,219.2,333.351,207.684z" />
													<path
														d="M469.646,367.551c-7.709-36.914-38.571-64.919-76.163-64.919c-43.496,0-78.016,37.517-78.016,82.944 c0,11.782,9.551,21.333,21.333,21.333c11.782,0,21.333-9.551,21.333-21.333c0-22.62,16.247-40.277,35.349-40.277     c14.245,0,26.892,9.802,32.417,24.154c-22.226,10.02-37.548,33.375-37.548,60.136c0,11.782,9.551,21.333,21.333,21.333     s21.333-9.551,21.333-21.333c0-12.896,8.998-22.677,19.157-22.677s19.157,9.781,19.157,22.677     c0,11.782,9.551,21.333,21.333,21.333S512,441.37,512,429.588C512,400.941,494.436,376.212,469.646,367.551z" />
												</g>
											</g>
										</g>
									</svg>
									<span>{{ day.clouds }}%</span>
								</div>
								<div>
									<svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">
										<path d="M13,30H9a2.0027,2.0027,0,0,1-2-2V20H9v8h4V20h2v8A2.0027,2.0027,0,0,1,13,30Z"
											transform="translate(0 0)" />
										<polygon points="25 20 23.25 20 21 29.031 18.792 20 17 20 19.5 30 22.5 30 25 20" />
										<rect x="15" y="2" width="2" height="5" />
										<rect x="21.6675" y="6.8536" width="4.958" height="1.9998"
											transform="translate(1.5191 19.3744) rotate(-45)" />
										<rect x="25" y="15" width="5" height="2" />
										<rect x="2" y="15" width="5" height="2" />
										<rect x="6.8536" y="5.3745" width="1.9998" height="4.958"
											transform="translate(-3.253 7.8535) rotate(-45)" />
										<path d="M22,17H20V16a4,4,0,0,0-8,0v1H10V16a6,6,0,0,1,12,0Z" transform="translate(0 0)" />
										<rect id="_Transparent_Rectangle_" data-name="&lt;Transparent Rectangle&gt;" class="cls-1"
											fill="none" width="32" height="32" />
									</svg>
									<span>{{ day.uvi }}</span>
								</div>
								<div>
									<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
										<path
											d="M7,15a5,5,0,0,1,10,0,1,1,0,0,1-2,0,3,3,0,0,0-6,0,1,1,0,0,1-2,0Zm11-4.586.707-.707a1,1,0,0,0-1.414-1.414L16.586,9A1,1,0,1,0,18,10.414ZM20,16h1a1,1,0,0,0,0-2H20a1,1,0,0,0,0,2ZM4,14H3a1,1,0,0,0,0,2H4a1,1,0,0,0,0-2ZM5.293,9.707,6,10.414A1,1,0,1,0,7.414,9l-.707-.707A1,1,0,0,0,5.293,9.707ZM4,18a1,1,0,0,0,1,1H19a1,1,0,0,0,0-2H5A1,1,0,0,0,4,18Zm4,3a1,1,0,0,0,0,2h8a1,1,0,0,0,0-2ZM12,9a1,1,0,0,0,1-1V4.414l1.293,1.293a1,1,0,0,0,1.414-1.414l-3-3a1,1,0,0,0-1.416,0l-3,3A1,1,0,0,0,9.707,5.707L11,4.414V8A1,1,0,0,0,12,9Z" />
									</svg>
									<span>{{ new Date(day.sunrise * 1000).toLocaleTimeString(dateFormat,
										{ hour: 'numeric', minute: 'numeric' }) }}</span>
								</div>
								<div>
									<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
										<path
											d="M7,15a5,5,0,0,1,10,0,1,1,0,0,1-2,0,3,3,0,0,0-6,0,1,1,0,0,1-2,0ZM17.293,8.293,16.586,9A1,1,0,1,0,18,10.414l.707-.707a1,1,0,0,0-1.414-1.414ZM22,15a1,1,0,0,0-1-1H20a1,1,0,0,0,0,2h1A1,1,0,0,0,22,15ZM4,14H3a1,1,0,0,0,0,2H4a1,1,0,0,0,0-2ZM6.707,8.293A1,1,0,0,0,5.293,9.707L6,10.414A1,1,0,1,0,7.414,9ZM4,18a1,1,0,0,0,1,1H19a1,1,0,0,0,0-2H5A1,1,0,0,0,4,18Zm13,4a1,1,0,0,0-1-1H8a1,1,0,0,0,0,2h8A1,1,0,0,0,17,22ZM12,1a1,1,0,0,0-1,1V5.586L9.707,4.293A1,1,0,0,0,8.293,5.707l3,3a1,1,0,0,0,1.414,0l3-3a1,1,0,1,0-1.414-1.414L13,5.586V2A1,1,0,0,0,12,1Z" />
									</svg>
									<span>{{ new Date(day.sunset * 1000).toLocaleTimeString(dateFormat,
										{ hour: 'numeric', minute: 'numeric' }) }}</span>
								</div>
							</div>
						</Tooltip>
						<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
							<path d="M9 12H15" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
							<path d="M12 9L12 15" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
							<path
								d="M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z"
								stroke-width="2" />
						</svg>
					</div>
				</div>
			</div>
			<div v-else-if="displayedForecast === 'hourly'" v-for="(chunk, indexD) in splitIntoGroups(
				weather[displayedForecast],
				groupSize
			)" :key="indexD" class="forecast-hourly" :class="{ active: currentPage - 1 === indexD }">
				<div v-for="(hour, i) in chunk" :key="i" class="hour">
					<div>
						{{
							new Date(hour.dt * 1000).toLocaleDateString(dateFormat, {
								weekday: smallScreen ? "short" : "long",
								month: "numeric",
								day: "numeric",
								hour: "numeric",
								minute: "numeric",
							})
						}}
					</div>
					<div>
						<img :src="`https://openweathermap.org/img/wn/${hour.weather[0].icon}.png`" :alt="hour.weather[0].main" />
					</div>
					<div>{{ convertTemp(unitsSystem, hour.temp) }}</div>
					<div>{{ hour.weather[0].description }}</div>
					<div class="tooltip-icon">
						<Tooltip>
							<div class="tooltip">
								<div v-if="hour.rain" class="precipitation">
									<svg viewBox="0 0 410.823 410.823" xmlns="http://www.w3.org/2000/svg">
										<g>
											<path
												d="M5.595,254.875c-17.185,46.513,6.539,98.118,53.048,115.317c46.474,17.203,98.103-6.577,115.312-53.046 c17.175-46.468-31.479-173.544-31.479-173.544S22.821,208.372,5.595,254.875z M35.054,273.141    c5.685,50.553,34.358,67.908,34.358,67.908C18.311,325.793,35.054,273.141,35.054,273.141z" />
											<path
												d="M395.391,259.702c0,0-52.531,28.454-60.083,48.864c-7.54,20.411,2.873,43.066,23.285,50.616 c20.399,7.535,43.06-2.884,50.614-23.278C416.761,315.505,395.391,259.702,395.391,259.702z M348.232,316.572    c2.503,22.202,15.086,29.817,15.086,29.817C340.889,339.719,348.232,316.572,348.232,316.572z" />
											<path
												d="M368.837,177.115c14.061-38.057-25.778-142.083-25.778-142.083s-97.944,53.086-112.03,91.106 c-14.074,38.028,5.364,80.34,43.398,94.384C312.473,234.624,354.746,215.17,368.837,177.115z M255.121,141.088    c4.663,41.38,28.137,55.596,28.137,55.596C241.416,184.205,255.121,141.088,255.121,141.088z" />
										</g>
									</svg>
									<span>{{ convertPrecipitationVolume(unitsSystem, hour.rain["1h"]) }} ({{ convertToPercentage(hour.pop)
									}})</span>
								</div>
								<div v-else-if="hour.snow" class="precipitation">
									<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
										<g>
											<path
												d="M458.071,306.273l-9.519-21.579l-65.885,29.07l-43.103-24.899l74.607-32.879l-74.589-32.87l43.085-24.863   l65.885,29.07l9.536-21.624l-50.088-22.103l76.363-44.053l-13.318-23.044l-76.362,44.08l5.917-54.422l-23.47-2.561l-7.782,71.576   l-43.085,24.89l8.83-81.022l-65.777,48.152V117.43l58.123-42.542l-13.934-19.055l-44.19,32.354V0h-26.6v88.187l-44.17-32.354   l-13.952,19.055l58.122,42.542v49.762l-65.777-48.134l8.795,80.995l-43.049-24.882l-7.799-71.576l-23.47,2.561l5.916,54.422   l-76.344-44.08l-13.318,23.044l76.363,44.053l-50.088,22.103l9.519,21.624l65.867-29.07l43.122,24.863l-74.59,32.888l24.501,10.803   l50.089,22.076l-43.104,24.882l-65.885-29.07l-9.536,21.579l50.106,22.112l-76.399,44.099l13.354,23.054l76.363-44.098   l-5.935,54.412l23.47,2.551l7.781-71.594l43.068-24.863l-8.813,81.013l65.794-48.151v49.771l-58.122,42.525l13.952,19.036   l44.17-32.328V512h26.6v-88.188l44.19,32.328l13.934-19.036l-58.123-42.542v-49.736l65.777,48.143l-8.812-81.022l43.067,24.863   l7.818,71.594l23.434-2.551l-5.9-54.412l76.345,44.098l13.318-23.054l-76.381-44.099L458.071,306.273z M156.385,256.004   l41.366-18.24l31.631,18.24l-31.612,18.268L156.385,256.004z M242.718,315.556l-36.534,26.727l4.904-44.958l31.63-18.267V315.556z    M242.718,232.942l-31.63-18.25l-4.904-44.967l36.534,26.718V232.942z M269.318,196.443l36.535-26.718l-4.922,44.967l-31.613,18.25   V196.443z M269.318,315.556v-36.498l31.613,18.267l4.922,44.958L269.318,315.556z M314.248,274.272l-31.612-18.268l31.631-18.24   l41.384,18.24L314.248,274.272z" />
										</g>
									</svg>
									<span>{{ convertPrecipitationVolume(unitsSystem, hour.snow["1h"]) }} ({{ convertToPercentage(hour.pop)
									}})</span>
								</div>
								<div>
									<svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">
										<path
											d="M13 11.261c0.038 0 0.070-0.018 0.107-0.021 2.849-0.061 5.136-2.386 5.136-5.244 0-2.897-2.348-5.245-5.245-5.245-2.404 0-4.43 1.617-5.050 3.823l-0.009 0.037-0.012 0.025c-0.115 0.411-0.181 0.883-0.182 1.371v0c0 0.69 0.56 1.25 1.25 1.25s1.25-0.56 1.25-1.25v0c0-0.254 0.035-0.499 0.099-0.732l-0.005 0.019 0.006-0.012c0.327-1.18 1.391-2.032 2.655-2.032 1.519 0 2.75 1.231 2.75 2.75s-1.231 2.75-2.75 2.75h-0c-0.019 0-0.034 0.010-0.053 0.011l-10.932-0.011c-0 0-0 0-0 0-0.69 0-1.25 0.56-1.25 1.25s0.559 1.25 1.249 1.25l10.985 0.011zM24.469 4.869c-3.106 0.004-5.723 2.093-6.527 4.942l-0.012 0.048-0.013 0.026c-0.149 0.53-0.235 1.139-0.235 1.768 0 0.002 0 0.003 0 0.005v-0c0 0.69 0.56 1.25 1.25 1.25s1.25-0.56 1.25-1.25v0c0-0.002 0-0.005 0-0.007 0-0.393 0.054-0.774 0.155-1.135l-0.007 0.030 0.007-0.013c0.509-1.837 2.166-3.163 4.133-3.163 2.364 0 4.281 1.917 4.281 4.281s-1.917 4.281-4.281 4.281v0c-0.026 0-0.047 0.013-0.072 0.015l-20.34-0.020c-0.689 0.003-1.246 0.561-1.246 1.25s0.557 1.247 1.245 1.25l20.413 0.020c0.053-0.008 0.099-0.017 0.144-0.029l-0.008 0.002c3.685-0.073 6.644-3.078 6.644-6.774 0-3.742-3.033-6.775-6.775-6.775-0.002 0-0.004 0-0.006 0h0zM22.718 19.309c-0.031-0.008-0.070-0.017-0.11-0.023l-0.006-0.001-18.546 0.018c-0.69 0-1.25 0.56-1.25 1.25s0.56 1.25 1.25 1.25c0 0 0 0 0.001 0l18.487-0.018c0.020 0.001 0.037 0.012 0.058 0.012 1.902 0 3.443 1.542 3.443 3.443s-1.542 3.443-3.443 3.443c-1.582 0-2.915-1.067-3.318-2.521l-0.006-0.024-0.007-0.015c-0.074-0.267-0.117-0.573-0.118-0.89v-0c0-0.002 0-0.003 0-0.005 0-0.69-0.559-1.25-1.25-1.25s-1.25 0.559-1.25 1.25c0 0.002 0 0.003 0 0.005v-0c0 0.002 0 0.005 0 0.007 0 0.55 0.075 1.082 0.214 1.587l-0.010-0.042c0.005 0.017 0.016 0.029 0.021 0.045 0.717 2.533 3.009 4.357 5.726 4.357 3.281 0 5.941-2.66 5.941-5.941 0-3.241-2.595-5.876-5.821-5.94l-0.006-0z" />
									</svg>
									<span>{{ convertSpeed(unitsSystem, hour.wind_speed) }}</span>
								</div>
								<div>
									<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
										<g>
											<path
												d="M255.996,74.939C114.838,74.939,0,189.784,0,330.942c0,19.646,2.24,39.233,6.667,58.228   c0.509,2.18,1.093,4.202,1.745,6.074c7.714,24.672,30.948,41.817,56.865,41.817h381.364c24.104,0,45.847-14.785,55-36.679   c1.108-2.18,2.03-4.599,2.734-7.296c0.27-1.026,0.689-2.741,1.318-5.528c4.179-18.478,6.307-37.54,6.307-56.617   C512,189.784,397.155,74.939,255.996,74.939z M475.763,380.811c-1.026,4.547-1.356,5.64-1.431,5.64l0.067-0.921   c-3.579,12.35-14.897,20.852-27.758,20.852H65.277c-12.831,0-24.119-8.456-27.729-20.77l0.21,1.416   c-0.045,0-0.33-1.026-1.214-4.816c-3.835-16.471-5.865-33.631-5.865-51.27c0-124.448,100.877-225.324,225.317-225.324   c124.44,0,225.324,100.876,225.324,225.324C481.321,348.08,479.396,364.767,475.763,380.811z" />
											<path
												d="M267.569,297.207c-3.633-1.244-7.52-1.955-11.572-1.955c-19.707,0-35.683,15.976-35.683,35.69   c0,19.706,15.976,35.682,35.683,35.682c18.036,0,32.912-13.392,35.308-30.769c0.225-1.618,0.374-3.243,0.374-4.913   C291.679,315.288,281.59,302.015,267.569,297.207z" />
											<path
												d="M399.716,194.787c-3.138-3.392-8.808-3.468-13.257-0.18l-123.594,91.004c2.696,0.412,5.378,1.049,8.014,1.955   c15.968,5.483,27.406,19.182,30.275,35.383l97.79-114.913C402.548,203.813,402.877,198.143,399.716,194.787z" />
											<path
												d="M340.402,182.908c5.543,3.214,12.628,1.303,15.834-4.239c3.206-5.551,1.303-12.636-4.239-15.849   c-5.543-3.19-12.644-1.288-15.849,4.247C332.956,172.624,334.844,179.717,340.402,182.908z" />
											<path
												d="M259.239,161.172c6.412,0,11.595-5.206,11.595-11.595c0-6.411-5.183-11.602-11.595-11.602   c-6.396,0-11.594,5.191-11.594,11.602C247.645,155.966,252.843,161.172,259.239,161.172z" />
											<path
												d="M76.175,320.898c-6.726,0-12.209,5.468-12.209,12.209s5.482,12.194,12.209,12.194   c6.741,0,12.194-5.453,12.194-12.194S82.916,320.898,76.175,320.898z" />
											<path
												d="M114.441,226.471c-5.542-3.206-12.643-1.289-15.849,4.254c-3.19,5.542-1.288,12.628,4.239,15.841   c5.558,3.206,12.658,1.296,15.864-4.247C121.886,236.776,119.984,229.677,114.441,226.471z" />
											<path
												d="M166.497,162.82c-5.558,3.213-7.445,10.298-4.239,15.849c3.191,5.542,10.291,7.453,15.834,4.239   c5.543-3.19,7.445-10.299,4.254-15.841C179.141,161.531,172.04,159.629,166.497,162.82z" />
											<path
												d="M404.038,226.471c-5.542,3.206-7.445,10.306-4.239,15.849c3.206,5.558,10.292,7.453,15.849,4.247   c5.542-3.213,7.445-10.299,4.239-15.841C416.696,225.182,409.595,223.265,404.038,226.471z" />
											<path
												d="M433.144,335.062c6.412,0,11.595-5.184,11.595-11.587c0-6.412-5.183-11.61-11.595-11.61   c-6.411,0-11.594,5.198-11.594,11.61C421.55,329.878,426.733,335.062,433.144,335.062z" />
										</g>
									</svg>
									<span>{{ hour.pressure }}</span>
								</div>
								<div>
									<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 328.611 328.611">
										<g>
											<path
												d="M209.306,50.798c-2.452-3.337-7.147-4.055-10.485-1.602c-3.338,2.453-4.055,7.147-1.603,10.485   c54.576,74.266,66.032,123.541,66.032,151.8c0,27.691-8.272,52.794-23.293,70.685c-17.519,20.866-42.972,31.446-75.651,31.446   c-73.031,0-98.944-55.018-98.944-102.131c0-52.227,28.103-103.234,51.679-136.829c25.858-36.847,52.11-61.415,52.37-61.657   c3.035-2.819,3.209-7.565,0.39-10.6c-2.819-3.034-7.565-3.209-10.599-0.39c-1.11,1.031-27.497,25.698-54.254,63.765   c-24.901,35.428-54.586,89.465-54.586,145.71c0,31.062,9.673,59.599,27.236,80.353c20.361,24.061,50.345,36.779,86.708,36.779   c36.794,0,66.926-12.726,87.139-36.801c17.286-20.588,26.806-49.117,26.806-80.33C278.25,156.216,240.758,93.597,209.306,50.798z" />
											<path
												d="M198.43,148.146l-95.162,95.162c-2.929,2.929-2.929,7.678,0,10.606c1.465,1.464,3.385,2.197,5.304,2.197   s3.839-0.732,5.304-2.197l95.162-95.162c2.929-2.929,2.929-7.678,0-10.606C206.107,145.217,201.359,145.217,198.43,148.146z" />
											<path
												d="M191.965,207.899c-13.292,0-24.106,10.814-24.106,24.106s10.814,24.106,24.106,24.106s24.106-10.814,24.106-24.106   S205.257,207.899,191.965,207.899z M191.965,241.111c-5.021,0-9.106-4.085-9.106-9.106s4.085-9.106,9.106-9.106   s9.106,4.085,9.106,9.106S196.986,241.111,191.965,241.111z" />
											<path
												d="M125.178,194.162c13.292,0,24.106-10.814,24.106-24.106s-10.814-24.106-24.106-24.106s-24.106,10.814-24.106,24.106   S111.886,194.162,125.178,194.162z M125.178,160.949c5.021,0,9.106,4.085,9.106,9.106s-4.085,9.106-9.106,9.106   c-5.021,0-9.106-4.085-9.106-9.106S120.156,160.949,125.178,160.949z" />
										</g>
									</svg>
									<span>{{ hour.humidity }}%</span>
								</div>
								<div>
									<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
										<path
											d="M13.5 0a.5.5 0 0 0 0 1H15v2.75h-.5a.5.5 0 0 0 0 1h.5V7.5h-1.5a.5.5 0 0 0 0 1H15v2.75h-.5a.5.5 0 0 0 0 1h.5V15h-1.5a.5.5 0 0 0 0 1h2a.5.5 0 0 0 .5-.5V.5a.5.5 0 0 0-.5-.5h-2zM7 1.5l.364-.343a.5.5 0 0 0-.728 0l-.002.002-.006.007-.022.023-.08.088a28.458 28.458 0 0 0-1.274 1.517c-.769.983-1.714 2.325-2.385 3.727C2.368 7.564 2 8.682 2 9.733 2 12.614 4.212 15 7 15s5-2.386 5-5.267c0-1.05-.368-2.169-.867-3.212-.671-1.402-1.616-2.744-2.385-3.727a28.458 28.458 0 0 0-1.354-1.605l-.022-.023-.006-.007-.002-.001L7 1.5zm0 0-.364-.343L7 1.5zm-.016.766L7 2.247l.016.019c.24.274.572.667.944 1.144.611.781 1.32 1.776 1.901 2.827H4.14c.58-1.051 1.29-2.046 1.9-2.827.373-.477.706-.87.945-1.144zM3 9.733c0-.755.244-1.612.638-2.496h6.724c.395.884.638 1.741.638 2.496C11 12.117 9.182 14 7 14s-4-1.883-4-4.267z" />
									</svg>
									<span>{{ convertTemp(unitsSystem, hour.dew_point) }}</span>
								</div>
								<div>
									<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512.013 512.013">
										<g>
											<g>
												<g>
													<path
														d="M333.351,207.684c-5.938-27.443-24.149-48.717-47.198-58.489C291.262,115.343,317.755,90,348.95,90 c30.726,0,56.89,24.588,62.552,57.676c-32.331,10.293-55.542,42.204-55.542,79.448c0,11.782,9.551,21.333,21.333,21.333     c11.782,0,21.333-9.551,21.333-21.333c0-22.62,16.247-40.277,35.349-40.277c19.121,0,35.371,17.655,35.371,40.277     c0,11.782,9.551,21.333,21.333,21.333c11.782,0,21.333-9.551,21.333-21.333c0-37.991-24.149-70.427-57.501-80.038     c-6.439-55.931-50.9-99.753-105.563-99.753c-53.86,0-97.813,42.545-105.252,97.298c-1.549,0.294-3.1,0.633-4.651,1.031     c-19.695,5.031-35.731,17.525-46.215,33.923c-24.998-1.854-49.892,9.171-66.204,30.691c-9.133,12.059-14.586,26.04-16.492,40.377     c-37.91-1.421-74.757,18.985-95.04,55.29c-29.771,53.217-14.231,122.427,35.364,155.2c9.83,6.496,23.064,3.793,29.56-6.037     s3.793-23.064-6.037-29.56c-30.677-20.272-40.669-64.775-21.645-98.784c13.644-24.423,38.583-36.649,62.899-32.832     c4.622,11.971,11.94,22.967,21.888,31.87c8.779,7.857,22.266,7.11,30.124-1.67s7.11-22.266-1.67-30.124     c-5.918-5.297-9.95-12.286-11.992-19.874c-0.158-1.52-0.479-3.01-0.951-4.447c-1.884-11.546,0.659-23.95,8-33.644     c5.06-6.675,11.66-11.036,18.731-12.922c-0.257,7.18,0.343,14.5,1.924,21.811c2.491,11.516,13.846,18.831,25.362,16.34     s18.831-13.846,16.34-25.362c-4.812-22.24,7.608-44.052,26.626-48.91c18.394-4.711,37.342,8.042,42.03,29.708     c2.491,11.516,13.846,18.831,25.362,16.34C328.527,230.555,335.842,219.2,333.351,207.684z" />
													<path
														d="M469.646,367.551c-7.709-36.914-38.571-64.919-76.163-64.919c-43.496,0-78.016,37.517-78.016,82.944 c0,11.782,9.551,21.333,21.333,21.333c11.782,0,21.333-9.551,21.333-21.333c0-22.62,16.247-40.277,35.349-40.277     c14.245,0,26.892,9.802,32.417,24.154c-22.226,10.02-37.548,33.375-37.548,60.136c0,11.782,9.551,21.333,21.333,21.333     s21.333-9.551,21.333-21.333c0-12.896,8.998-22.677,19.157-22.677s19.157,9.781,19.157,22.677     c0,11.782,9.551,21.333,21.333,21.333S512,441.37,512,429.588C512,400.941,494.436,376.212,469.646,367.551z" />
												</g>
											</g>
										</g>
									</svg>
									<span>{{ hour.clouds }}%</span>
								</div>
								<div>
									<svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">
										<path d="M13,30H9a2.0027,2.0027,0,0,1-2-2V20H9v8h4V20h2v8A2.0027,2.0027,0,0,1,13,30Z"
											transform="translate(0 0)" />
										<polygon points="25 20 23.25 20 21 29.031 18.792 20 17 20 19.5 30 22.5 30 25 20" />
										<rect x="15" y="2" width="2" height="5" />
										<rect x="21.6675" y="6.8536" width="4.958" height="1.9998"
											transform="translate(1.5191 19.3744) rotate(-45)" />
										<rect x="25" y="15" width="5" height="2" />
										<rect x="2" y="15" width="5" height="2" />
										<rect x="6.8536" y="5.3745" width="1.9998" height="4.958"
											transform="translate(-3.253 7.8535) rotate(-45)" />
										<path d="M22,17H20V16a4,4,0,0,0-8,0v1H10V16a6,6,0,0,1,12,0Z" transform="translate(0 0)" />
										<rect id="_Transparent_Rectangle_" data-name="&lt;Transparent Rectangle&gt;" class="cls-1"
											fill="none" width="32" height="32" />
									</svg>
									<span>{{ hour.uvi }}</span>
								</div>
							</div>
						</Tooltip>
						<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
							<path d="M9 12H15" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
							<path d="M12 9L12 15" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
							<path
								d="M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z"
								stroke-width="2" />
						</svg>
					</div>
				</div>
			</div>
		</div>
		<ScrollToTopBtn />
	</section>
</template>

<style scoped lang="scss">
@import "../assets/base.scss";

.weather-forecast {
	display: flex;
	flex-direction: column;
	gap: 1rem;
	text-transform: capitalize;

	button.active {
		color: var(--color-border-active);
		border-color: var(--color-text-alt);
	}
}

.forecast-controls {
	display: flex;
	flex-direction: column;
	justify-content: space-between;
	align-items: center;
	gap: 1rem;

	button {
		min-width: 72px;
	}
}

.time-controls {
	button:not(.active) {
		background-color: transparent;
		border-color: var(--color-border) transparent;
		border-radius: 0;

		&:hover {
			background-color: var(--color-background);
			border-color: var(--color-text);
			border-radius: 4px;
		}

		&:active {
			border-color: var(--color-border-active);
		}
	}
}

.display-controls {
	display: flex;
	align-items: center;
	gap: 2rem;
}

.time-controls {
	display: flex;
	align-items: center;
	gap: 1rem;
}

.page-controls {
	display: flex;
	align-items: center;
	gap: 0.25rem;

	.dot {
		display: block;
		width: 14px;
		height: 14px;
		margin: 0 0.25rem;
		border-radius: 50%;
		border: 2px solid var(--color-heading);
		user-select: none;
		cursor: pointer;
		transition: 0.30s ease-in-out;

		&:hover {
			background-color: var(--color-border-hover);
			border-color: var(--color-text);
		}

		&:active {
			background-color: var(--color-border-active);
		}

		&.active {
			background-color: var(--color-text-alt);
			border-color: var(--color-text-alt);
		}
	}

	.arrow-prev,
	.arrow-next {
		width: 20px;
		height: 20px;
		cursor: pointer;

		&:before,
		&:after {
			display: block;
			margin: auto;
			content: "";
			width: 12px;
			height: 4px;
			background-color: var(--color-heading);
			transform: translateY(5px) rotate(-45deg);
			margin: 0 0.25rem;
			transition: 0.30s ease-in-out;
		}

		&:after {
			transform: translateY(7px) rotate(45deg);
		}

		&:hover:before,
		&:hover:after {
			background-color: var(--color-text);
		}

		&:active:before,
		&:active:after {
			background-color: var(--color-text-alt);
		}
	}

	.arrow-next {
		transform: scaleX(-1);
	}
}

.scroll-controls {
	display: none;

	button {
		min-width: 60px;
	}
}

#forecast-display {
	display: flex;
	flex-direction: column;
	text-align: center;

	&.scroll {

		.forecast-daily,
		.forecast-hourly {
			display: flex;
			flex-direction: column;
		}
	}
}

.forecast-daily,
.forecast-hourly {
	display: none;
	flex: 1;
	min-height: 280px;

	&.active {
		display: flex;
		flex-direction: column;
	}
}

.day,
.hour {
	display: grid;
	grid-template-columns: 1fr 50px 80px 1fr 20px;
	grid-auto-flow: column;
	align-items: center;
	padding: 0 0.5rem;
	gap: 0.5rem;
	border-radius: 8px;
	transition: 0.30s ease-in-out;
	-webkit-transition: background-color 0.30s ease-in-out, color 0s;

	&:nth-child(2n) {
		background-color: var(--color-background);
	}

	.tooltip-icon {
		width: 20px;
		height: 20px;

		>svg {
			fill: transparent;
			stroke: var(--color-text);
		}
	}

	.temperature {
		>div {
			display: flex;
			justify-content: space-evenly;
			align-items: center;
			flex-wrap: wrap;
			gap: 0.25rem;

			svg {
				width: 20px;
				height: 20px;

				path {
					fill: var(--color-text-alt);
					transition: 0.30s ease-in-out;
				}
			}

			.moon path {
				fill: var(--vt-c-border-dark);
			}
		}
	}
}

.hour {
	grid-template-columns: 1fr 50px 50px 1fr 20px;
}

.tooltip {
	display: grid;
	grid-template-columns: repeat(3, 1fr);
	justify-content: space-between;
	column-gap: 1rem;
	row-gap: 0.5rem;
	width: 100%;
	height: 100%;

	div {
		display: flex;
		align-items: center;
		gap: 0.5rem;
		font-size: 0.75rem;

		&.precipitation {
			grid-column: span 2;
		}

		svg {
			width: 24px;
			height: 24px;
			fill: var(--color-text);
		}
	}
}

@media (min-width: 640px) {
	.forecast-controls {
		flex-direction: row;
		flex-wrap: nowrap;
	}

	.day .temperature>div {
		justify-content: space-between;
	}
}

@media (min-width: 940px) {
	.scroll-controls {
		display: flex;
		align-items: center;
		gap: 0.5rem;
	}

	#forecast-display {
		flex-direction: row;
		padding-bottom: 1rem;

		&.scroll {
			overflow-x: scroll;
			scrollbar-width: thin;

			.forecast-daily,
			.forecast-hourly {
				display: grid;
				grid-template-columns: minmax(0, 1fr);
				grid-auto-columns: 1fr;
				grid-auto-flow: column;
				min-width: 100%;
			}
		}
	}

	.forecast-daily,
	.forecast-hourly {
		grid-auto-flow: column;

		&.active {
			display: grid;
			grid-template-columns: minmax(0, 1fr);
			grid-auto-columns: 1fr;
			grid-auto-flow: column;
			min-width: fit-content !important;
		}
	}

	.day,
	.hour {
		display: grid;
		grid-template-columns: unset;
		grid-template-rows: 1fr 50px 50px 1fr 20px;
		grid-auto-flow: column;
		justify-items: center;
		align-items: start;
		padding: 1rem;
		min-width: fit-content; // Required to prevent only first item on only first page from being overlapped by second item (why???)
	}
}
</style>
